---
title: 10. ვებ აპლიკაცია 1 - პოსტი
parent: სემინარები
---

ეს არის აპლიკაციის პირველი სემინარი. ამ რესურსის დამოუკიდებლად უკეთ გამოყენებისთვის, გირჩევთ:
- თითო ფუნქცია/ფუნქციის ნაწილი გამოყოფილია სათაურით და ბევრგან სათაურის შემდეგ წერია აღწერა. ჯერ შეეცადეთ გაიხსენოთ სემინარიდან და ახსნის გარეშე დაწეროთ
- შემდეგ დაიწყეთ ახსნის კითხვა. ყველა ხაზი გადაიტანეთ თქვენით, copy paste-ის გარეშე. რესურსი და ედიტორი გვერდი გვერდ არ გქონდეთ რომ არ გადაწეროთ. შეხედეთ კოდს, რომელიც უნდა დაწეროთ, შემდეგ გადადით ედიტორზე და მეხსიერებიდან დაწერეთ. თუ ვერ გაიხსენეთ, თავიდან ჩაიხედეთ და ისევ დაბრუნდით.
- შეეცადეთ google-ით მონიშნული ძებნები შეასრულოთ ამოხსნის კოდის ნახვამდე და ძებნის შედეგი გამოიყენოთ კოდის თქვენით დასაწერად. შემდეგ შეადარეთ ჩემს მიერ დაწერილს
- შეგახსენებთ, რომ საიტზე დევს [ვებ დეველოპმენტის გარემოს ინსტრუქცია](/resources/web_environment)
- ფაილები ატვირთულია 10_webapp1 ფოლდერში [google drive](https://drive.google.com/drive/folders/1rAFbRSydbmKRXfvfewmAHKLVr9PKjDK7?usp=sharing)-ზე.


## საწყისი კოდი
შეიცავს:
- html ჩონჩხს. style.css და index.js უკვე ჩასმულია
- არის div id-ით app, რომელშიც იქნება აპლიკაციის ელემენტები. ამ გვერდზე დაწერილი html კოდი ჩათვალეთ, რომ ამ დივში იწერება

# დაპოსტვის ფუნქცია
საიტზე არის ველი და ღილაკი. ღილაკზე დაჭერის შემდეგ ველში დაწერილი ტექსტი ემატება საიტზე.

<details>
    <summary>უფრო ზუსტი აღწერა ტესტებიდან</summary>

დოკუმენტს უნდა ქონდეს პოსტების ელემენტი, რომლის id არის new-post-container. new-post-container ელემენტში არსებობს textarea, რომლის id არის new-post-text. new-post-container ელემენტში არსებობს ღილაკი, რომლის id არის new_post new-post-container ელემენტში დაპოსტილი პოსტებისთვის არსებობს div ელემენტი, რომლის id არის posts-container

ამ ღილაკზე დაჭერის შემდეგ პოსტის ველში შეყვანილი ტექსტი უნდა დაემატოს პოსტების ფიდში (დაპოსტილი პოსტები). თითოეული პოსტისთვის შექმენით ახალი ელემენტი, რომელსაც ექნება კლასი post-container. აქ შეგიძლიათ სხვადასხვა ელემენტები იყოს. მთავარია, უშუალოდ პოსტის ტექსტის div-ს ქონდეს კლასი post-text
</details>

## პოსტის ტექსტის შესაყვანი ველი
input ელემენტი უკვე ნასწავლი გვაქვს, მაგრამ მისი დამატების შემთხვევაში ვხედავთ რომ საკმაოდ პატარა ველი არის მრავარპარაგრაფიანი მჭერმეტყველი პოსტებისთვის, რომელიც სოციალურ მედიას ახასიათებს. 

> search: html multi line input

app div-ში ჩავამატოთ
```html
<textarea id="new-post-text"></textarea>
```

## დაპოსტვის ფუნქცია
ჯერ მხოლოდ ჯავასკრიპტით ავამუშავოთ. მინდა შევქმნა ფუნქცია `createNewPost`, რომელიც არგუმენტად პოსტის ტექსტს აიღებს და გვერდზე დაამატებს. 

```js
function createNewPost(postText) {

}
```
ჯერ დავამატოთ ელემენტი, სადაც იქნება ეს პოსტები
```html
<div id="posts-container"></div>
```

რა მოხდება, თუ ფუნქციაში ამას ჩავწერთ და შემდეგ გამოვიძახებთ?
```js
let posts = document.getElementById('posts')
let post = "<div>" + postText + "</div>"
posts.innerText = post
```
რა პრობლემაა ასეთ ფუნქციაში? სცადეთ მეორე პოსტის დამატება.

იმის მაგივრად, რომ ორივე პოსტი ჩანდეს, პირველ პოსტს გადაეწერა ახალი. როგორ მოვაგვაროთ ეს პრობლემა?

> search: javascript append string to element

ფუნქციის მესამე ხაზი ამით ჩავანაცვლოთ:
```js
posts.insertAdjacentHTML( 'beforeend', post);
```
ახლა ერთადერთი პრობლემაღა დარჩა - პოსტები ქრონოლოგიურად არ არის დამატებული. ახალი პოსტის დამატებისას გვინდა რომ posts ელემენტის დასაწყისში გამოჩნდეს. ეს ფუქნცია გვჭირდება, უბრალოდ beforeend ის მაგივრად სხვა რაღაც უნდა ჩავწეროთ.

> search: javascript insertAdjacentHTML beginning

საბოლოოდ ფუნქცია ასე გამოიყურება:
```js
function createNewPost(postText) {
    let posts = document.getElementById('posts')
    let post = "<div>" + postText + "</div>"
    posts.insertAdjacentHTML( 'afterbegin', post);
}
```


## შესაყვანი ველის და ღილაკის დაკავშირება
`textarea`ს ქვემოთ ეს ხაზი დავამატოთ
```html
<button onclick="newPost()">post</button>
```

რატომ არ მივაბით ღილაკს createNewPost() ფუნქცია? იმიტომ, რომ postText მნიშვნელობა ჯავასკრიპტში უნდა ვიპოვოთ. 

ახლა შევქმნათ ეს newPost ფუნქცია. აქ გვინდა, რომ textarea-ს მნიშვნელობა ამოვიღოთ და გადავაწოდოთ createNewPost ფუნქციას

> search: javascript get textarea value

```js
function createNewPost() {
    let text = document.getElementById('new-post-text').value
    createNewPost(text)
}
```

ეგარი. მთავარი ფუნქციონალი მუშაობს.

## უფრო მოსახერხებელი string-ები
`"<div>" +postText+"</div>"`ამ ეტაპზე უბრალოდ ულამაზოა, მაგრამ რა მოხდება, როდესაც პოსტის div-ში დაგვჭირდება ლაიქის, კომენტარების და ბევრი სხვა ელემენტის დამატება, და ყველგან სხვადასხვა ცვლადის "ჩაკერება"? 

> search: javascript use variable in string

> search: javascript multiline string

`createNewPost`-ის მესამე ხაზი გავაუმჯობესოთ და ტესტის მოთხოვნებსაც შევუსაბამოთ
```js
let post = `<div class='post'>
    <div class='new-post-text'>
        ${postText}
    </div>
</div>`
```


## პოსტის id
გვინდა, რომ ყოველი ახალი პოსტის ელემენტს ქონდეს id, რომელშიც იქნება ნომერი, თუ მერამდენე პოსტია ის.

ჯერ არ ვიზრუნოთ იმაზე, თუ საიდან გავიგებთ მერამდენე პოსტია. უბრალოდ ახალი პოსტის შექმნის ფუნქციას არგუმენტი მივუმატოთ.
```js
function createNewPost(postText, postId)
```
და ახალი პოსტის ელემენტში ჩავამატოთ ეს რიცხვი
```js
let post = `<div class='post' id='post${postId}'`
// ...
```

ახლა შევქმნათ გლობალური ცვლადი, რომელსაც გადავცემთ ამ ფუნქციას და post ღილაკის ყოველ დაჭერაზე ერთით გავზრდით.

`index.js`-ის პირველ ხაზზე;
```js
let POSTS_ID_COUNTER = 1;
```

შემდეგ კი ფუნქცია შევცვალოთ:
```js
function createNewPost() {
    let text = document.getElementById('new-post-text').value
    createNewPost(text, postId)
    POSTS_ID_COUNTER++;
}
```

## პოსტის ველის მინიშნება
ბევრ აპლიკაციას პოსტის ველში ტექსტის დაწერამდე კითხვა ან წამახალისებელი მესიჯი აქვს ღია ფრად. როგორც კი ტექსტის ჩაწერას ვიწყებთ, ეს მესიჯი ქრება.

> search: html textarea hint

textarea ელემენტს უბრალოდ placeholder ატრიბუტი უნდა დავუმატოთ და მისი მნიშვნელობა სასურველ მესიჯს გავუტოლოთ.
```html
<textarea placeholder="what's up? :)">
</textarea>
```