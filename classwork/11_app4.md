---
title: 11. ვებ აპლიკაცია 4 - მონაცემების შენახვა
parent: სემინარები
---


საწყისი ფაილები: app3
საბოლოო ფაილები: app4

- აქ გადმოსატანია database ინსტრუქცია. სცადონ კონსოლში ახალი ობიექტის შექმნა, მოძებნა, ყველას ნახვა, სანამ კოდში გამოიყენებენ

1. ახალი ბაზის შექმნა
2. პოსტის შენახვა
3. ლაიქის შენახვა
4. ჩატვირთვისას წინა პოსტების გამოჩენა

## მონაცემთა ბაზის გამოყენება
იმისთვის, რომ ჩვენი ობიექტები მეხსიერებაში მყოფი სიის მაგივრად (რომელიც ყოველ დარესტარტებაზე წაიშლება) უფრო სტაბილურ და გამძლე ადგილას შევინახოთ, გვაქვს რამდენიმე დამხმარე ფუნქცია. ეს ნაწილი ამ სემესტრში სავალდებულო არ არის და დროში შეზღუდვის გამო დეტალურ ახსნას ვერ დავურთავ.

გამოყენება: html დოკუმენტში ჩასვით < script src = "database.js"> შემდეგ js ფაილის თავში შევქმნათ ბაზა: 

```js
let posts = new Database('posts')
let previousPosts = posts.getAll()

for (let post of previousPosts) {
	addPost(post)
}
```
პირველ ხაზზე ჩვენ ვქმნით ამ დეითა ბაზას, და უკვე ამ ბაზას შემდეგ გააჩნია თავისი ფუნქცია getAll() რომელიც აბრუნებს ამ ბაზაში არსებულ ყველა პოსტს, და ამას ჩვენ მეორე ხაზზე გავუტოლებთ previousPosts, ბოლოს კი უკვე for ციკლით გადავუყვებით previousPosts და თითოეული post-ს addPost ფუნქციის დახმარებით ვამატებთ ფანჯარაზე, ამიტომ ყველა წინა შექმნილი პოსტი გამოჩნდება ფანჯარაზე. createPost ფუნქცია ბაზასთან ერთად ესეთ სახეს მიიღებს:

```js
function createPost() {
	let textElem = document.getElementById('new-post-text')
	let post = posts.create({
		text: textElem.value,
		likes: 0
	})
	addPost(post)
}
```
posts ბაზას გააჩნია თავისი create ფუნქცია რომელსაც გადავცემთ text და likes და ინახავს პოსტს შესაბამის ბაზაში.
```js
function likePost(postId) {
	let postElem = document.querySelector('#post' + postId)
	let likesElem = postElem.querySelector('.post-likes-number')
	let post = posts.getById(postId)
	post.likes++
	posts.update(post)
	likesElem.innerText = post.likes
}
```
likePost ფუნქციაში კი უკვე let post = posts.getById(postId) ამ ხაზზე პოსტს ვუტოლებთ ბაზის ფუნქციას getById-ის, რომლის მიხედვიდაც ბრუნდება პოსტი მისი აიდის მიხედვით, შემდეგ ვუმატებთ ლაიქების რაოდენობას და posts.update(post) ამით ვააფდეითებთ მოცემულ ბაზაში შესაბამის პოსტსს, ბოლო ხაზით კი ეს ცვლილება რომ აისახოს საიტზეც მის innerText-საც ვცვლით შესაბამისად.
